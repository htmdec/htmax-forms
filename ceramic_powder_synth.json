{
  "definitions": {
    "date": {
      "$id": "#/definitions/date",
      "type": "string",
      "format": "date",
      "options": {
        "flatpickr": {}
      }
    },
    "files": {
      "$id": "files",
      "type": "object",
      "format": "grid",
      "properties": {
        "targetPath": {
          "type": "string",
          "title": "Target Path",
          "watch": {
            "sampleId": "root.sampleId"
          },
          "template": "{{sampleId}}"
        },
        "file": {
          "type": "string",
          "propertyOrder": 1,
          "title": "Upload files"
        },
        "button": {
          "title": "Browse",
          "format": "button",
          "propertyOrder": 2,
          "options": {
            "button": {
              "action": "button1CB",
              "uploadFor": "file"
            }
          }
        }
      }
    }
  },
  "properties": {
    "sampleId": {
      "type": "string",
      "propertyOrder": 3,
      "template": "{{toolId}}_{{date}}_{{suffix}}_{{userInitials}}_{{grainSize}}",
      "watch": {
        "toolId": "toolId",
        "date": "fabricationDate",
        "suffix": "anId",
        "splitValue": "splitValue",
        "userInitials": "userInitials",
        "grainSize": "grainSize.max"
      },
      "options": {
        "hidden": true
      }
    },
    "toolId": {
      "propertyOrder": 1,
      "title": "Synthesis Tool Identifier",
      "type": "string",
      "enum": [
        "GC"
      ],
      "options": {
        "enum_titles": [
          "Gas carburization in 10% CH4/Bal Ar"
        ]
      }
    },
    "initialComposition": {
      "title": "Initial Composition",
      "type": "string",
      "enumSource": "girder.formId:PLACEHOLDER",
      "propertyOrder": 2
    },
    "fabricationDate": {
      "title": "Date Of Fabrication",
      "$ref": "#/definitions/date",
      "propertyOrder": 3
    },
    "quantity": {
      "title": "Material Quantity (g)",
      "type": "array",
      "items": {
        "type": "number"
      },
      "propertyOrder": 4
    },
    "conditions": {
      "type": "object",
      "title": "Processing Conditions",
      "properties": {
        "description": {
          "type": "string",
          "title": "Description",
          "format": "textarea",
          "description": "1-2 sentences description",
          "propertyOrder": 1
        },
        "temperature": {
          "type": "number",
          "title": "Reaction Temperature (degC)",
          "propertyOrder": 2
        },
        "time": {
          "type": "number",
          "title": "Reaction Time (min)",
          "propertyOrder": 3
        }
      },
      "propertyOrder": 5
    },
    "anId": {
      "type": "string",
      "title": "Alphanumeric Identifier",
      "propertyOrder": 6,
      "format": "custom",
      "pattern": "[0-9,A-Z]",
      "maxLength": 1
    },
    "userInitials": {
      "type": "string",
      "title": "User Initials",
      "propertyOrder": 7,
      "maxLength": 5
    },
    "grainSize": {
      "title": "Particle size range (Âµm)",
      "type": "object",
      "format": "grid",
      "properties": {
        "min": {
          "type": "number",
          "title": "Minimum",
          "default": 0.1,
          "propertyOrder": 1,
          "options": {
            "grid_columns": 6
          }
        },
        "max": {
          "type": "number",
          "title": "Maximum",
          "default": 10,
          "propertyOrder": 2,
          "options": {
            "grid_columns": 6
          }
        }
      },
      "propertyOrder": 8
    },
    "files": {
      "title": "Diffraction Data",
      "description": "Upload any relevant files. Make sure they have unique names.",
      "$ref": "#/definitions/files",
      "propertyOrder": 9
    }
  },
  "title": "Ceramic Powder Synthesis (HT-MAX)",
  "description": "Form to track ceramic powder samples for HT-MAX using defined naming conventions and metadata protocols",
  "type": "object"
}
